<!DOCTYPE HTML>
<!--[if IE 6]>
<html id="ie6" lang="en-US" class="ie ie6 lt-ie9">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US" class="ie ie7 lt-ie9">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US" class="ie ie8 lt-ie9">
<![endif]-->
<!--[if gte IE 9]>
<html lang="en-US" class="ie ie9">
<![endif]-->
<!--[if !(IE)]><!-->
<html lang="en-US" class="">
<!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <title>World is in conflict: my app is online</title>
  <link rel="stylesheet" href="assets/css/reset.css">
  <link rel="stylesheet" href="css/flowtime.css">
  <link rel="stylesheet" href="css/themes/default.css">
  <link rel="stylesheet" href="assets/css/prism.css">

  <link rel="apple-touch-icon-precomposed"             href="img/touch-icon-iphone.png">
  <link rel="apple-touch-icon-precomposed"   sizes="72x72"     href="img/touch-icon-ipad.png">
  <link rel="apple-touch-icon-precomposed"   sizes="114x114"   href="img/touch-icon-iphone-retina.png">
  <link rel="apple-touch-icon-precomposed"   sizes="144x144"   href="img/touch-icon-ipad-retina.png">

  <link rel="apple-touch-startup-image" href="img/startup-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)">
  <link rel="apple-touch-startup-image" href="img/startup-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
  <svg viewBox="0 0 400 200" style="height: 0; width: 0;">
    <defs>
      <!-- 100x50 centered cloud -->
      <path id="cloud" transform="scale(0.5, 0.3) translate(-385, -395)" d="M 404.82773,299.83793 C 390.22963,299.83793 377.56518,307.70801 370.48083,319.33078 C 363.90815,314.68689 355.94082,311.87906 347.28681,311.87908 C 325.01481,311.87908 306.91934,329.97456 306.91934,352.24655 C 306.91934,353.88322 307.2231,355.44757 307.41283,357.0334 C 288.17814,360.10248 273.41137,376.61535 273.41137,396.70999 C 273.41137,416.62054 287.89441,433.09939 306.86999,436.38657 C 306.48549,438.62212 306.1791,440.90134 306.1791,443.24608 C 306.1791,465.51809 324.27456,483.56421 346.54657,483.56421 C 357.45549,483.56421 367.31225,479.20668 374.5768,472.16459 C 381.98006,480.9708 392.92489,486.72254 405.32122,486.72254 C 423.00812,486.72254 437.87677,475.23091 443.31994,459.3832 C 447.67667,460.99428 452.32187,462.04805 457.23635,462.04805 C 479.50836,462.04805 497.55446,443.95259 497.55447,421.68058 C 497.55447,410.48096 492.98863,400.3708 485.61202,393.05816 C 489.33611,386.94832 491.6326,379.85746 491.6326,372.18354 C 491.6326,349.91153 473.53714,331.8654 451.26512,331.86542 C 448.9206,331.86542 446.64096,332.12254 444.40561,332.50696 C 440.80916,313.91248 424.46771,299.83793 404.82773,299.83793" />

      <!-- 70x90 centered tablet -->
      <g id="tablet">
        <path d="M -35 -45 L 35 -45 L 35 45 L -35 45 L -35 -45" />
        <path d="M -35 39 L 35 39" />
        <circle cy="42" r="1.5"/>
      </g>

      <!-- 25x40 centered phone -->
      <g id="phone">
        <path class="device" d="M -12.5 -20 L 12.5 -20 L 12.5 20 L -12.5 20 L -12.5 -20" />
        <path class="device" d="M -3 -17 L 3 -17" />
        <path class="device" d="M -12.5 -14 L 12.5 -14" />
        <path class="device" d="M -12.5 14 L 12.5 14" />
        <circle class="device" cy="17" r="1.5"/>
      </g>

      <!-- 160x118 centered desktop -->
      <path id="desktop" transform="translate(-100, -65)" d="M 20 10 L 180 10 L 180 110 L 110 110 L 115 125 L 120 125 L 120 128 L 80 128 L 80 125 L 85 125 L 90 110 L 20 110 L 20 10" />

      <!-- right pointed arrow -->
      <path id="arrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
    </defs>
  </svg>
</head>
<body class="">

  <div class="flowtime">
    <div class="ft-section" data-id="starters">
      <div class="ft-page" data-id="landpage" data-title="World in conflict">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>World is in conflict:</h1>
            <h2>my app is online</h2>
            <img src="nodejsconfit.png" />
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="speakers" data-title="Speakers">
        <div class="stack-center">
          <div class="stacked-center speakers">
            <h1>Speakers</h1>
            <img src="img/math.png">
            <img src="img/fab.png">
            <br/>
            <img src="img/jssophia.jpg">
            <img src="img/rivieragug.png">
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="interactivity" data-title="Interactivity">
        <h1>Interactivity</h1>
        <h2><a href="http://nodejsconfit.mais-h.eu">http://nodejsconfit.mais-h.eu</a></h2>
        <ul>
          <li>Ask/rank questions to be discussed at the end</li>
          <li>Rate content slide by slide in real time</li>
        </ul>
        <p>TODO: screenshot</p>
      </div>
    </div>
    <div class="ft-section" data-id="introduction">
      <div class="ft-page" data-id="webapplication" data-title="Web application">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Web application</h1>
            <svg viewBox="0 0 400 200" class="webapplication">
              <style type="text/css" ><![CDATA[
                .webapplication .device {
                  stroke: purple;
                  fill: black;
                }
              ]]></style>
              <use xlink:href="#desktop" class="device" transform="translate(100, 65)" />
              <use xlink:href="#tablet" class="device" transform="translate(270, 65)" />
              <use xlink:href="#phone" class="device" transform="translate(360, 90)" />
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="clientserver" data-title="Client server">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Client/server</h1>
            <svg viewBox="0 0 400 200" class="clientserver">
              <style type="text/css" ><![CDATA[
                .clientserver .cloud {
                  stroke: #222244;
                  fill: #AAA;
                }
                .clientserver .server text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 10pt;
                  fill: #222244;
                }
                .clientserver .client, .clientserver .client rect, .clientserver .client path, .clientserver .client circle {
                  stroke: purple;
                  fill: black;
                }
                .clientserver path {
                  stroke: black;
                }
              ]]></style>
              <path d="M 200 100 L 200 30" />
              <use xlink:href="#desktop" class="client" transform="translate(200, 30) scale(0.4)" />
              <path d="M 200 100 L 300 60" />
              <use xlink:href="#tablet" class="client" transform="translate(300, 60) scale(0.6)" />
              <path d="M 200 100 L 300 140" />
              <use xlink:href="#phone" class="client" transform="translate(300, 140)" />
              <path d="M 200 100 L 200 170" />
              <use xlink:href="#tablet" class="client" transform="translate(200, 170) scale(0.6)" />
              <path d="M 200 100 L 100 140" />
              <use xlink:href="#desktop" class="client" transform="translate(100, 140) scale(0.4)" />
              <path d="M 200 100 L 100 60" />
              <use xlink:href="#phone" class="client" transform="translate(100, 60)" />

              <g class="server" transform="translate(200, 100)">
                <use class="cloud" xlink:href="#cloud" transform="scale(0.7)" />
                <text>Server</text>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mostoffline" data-title="Clients mostly offline">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>... mostly offline</h1>
            <svg viewBox="0 0 400 200" class="mostlyoffline">
              <style type="text/css" ><![CDATA[
                .mostlyoffline .cloud {
                  stroke: #222244;
                  fill: #AAA;
                }
                .mostlyoffline .server text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 10pt;
                  fill: #222244;
                }
                .mostlyoffline .client, .mostlyoffline .client rect, .mostlyoffline .client path, .mostlyoffline .client circle {
                  stroke: purple;
                  fill: black;
                }
                .mostlyoffline .offline, .mostlyoffline .offline rect, .mostlyoffline .offline path, .mostlyoffline .offline circle {
                  fill: #222;
                }
                .mostlyoffline path {
                  stroke: black;
                }
                .mostlyoffline .offlinelink {
                  stroke: #288;
                  stroke-dasharray: 4 4;
                }
              ]]></style>
              <path class="offlinelink" d="M 200 100 L 200 30" />
              <use xlink:href="#desktop" class="client offline" transform="translate(200, 30) scale(0.4)" />
              <path d="M 200 100 L 300 60" />
              <use xlink:href="#tablet" class="client" transform="translate(300, 60) scale(0.6)" />
              <path class="offlinelink" d="M 200 100 L 300 140" />
              <use xlink:href="#phone" class="client offline" transform="translate(300, 140)" />
              <path class="offlinelink" d="M 200 100 L 200 170" />
              <use xlink:href="#tablet" class="client offline" transform="translate(200, 170) scale(0.6)" />
              <path class="offlinelink" d="M 200 100 L 100 140" />
              <use xlink:href="#desktop" class="client offline" transform="translate(100, 140) scale(0.4)" />
              <path d="M 200 100 L 100 60" />
              <use xlink:href="#phone" class="client" transform="translate(100, 60)" />

              <g class="server" transform="translate(200, 100)">
                <use class="cloud" xlink:href="#cloud" transform="scale(0.7)" />
                <text>Server</text>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="synchronization" data-title="Synchronization">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Synchronization</h1>
            <svg viewBox="0 0 400 200" class="synchronization">
              <style type="text/css" ><![CDATA[
                .synchronization .cloud {
                  stroke: #222244;
                  fill: #999;
                }
                .synchronization text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 10pt;
                }
                .synchronization .network path {
                  stroke: black;
                  stroke-dasharray: 4 4;
                }
                .synchronization .exchange path {
                  stroke: #994444;
                  fill: none;
                }
              ]]></style>
              <g class="entity" transform="translate(70,55)">
                <use class="cloud" xlink:href="#cloud"/>
                <text y="-7">Actor A</text>
                <text y="7">State 1</text>
              </g>
              <g class="entity" transform="translate(330,55)">
                <use class="cloud" xlink:href="#cloud"/>
                <text y="-7">Actor B</text>
                <text y="7">State 2</text>
              </g>
              <g class="network" transform="translate(200,0)">
                <text y="20">Network</text>
                <path d="M 0 30 L 0 170" style="" />
              </g>
              <g class="entity" transform="translate(70,165)">
                <use class="cloud" xlink:href="#cloud"/>
                <text y="-7">Actor A</text>
                <text y="7">State 3</text>
              </g>
              <g class="entity" transform="translate(330,165)">
                <use class="cloud" xlink:href="#cloud"/>
                <text y="-7">Actor B</text>
                <text y="7">State 3</text>
              </g>
              <g class="exchange" transform="translate(120,80)">
                <path d="M 0 0 L 160 10 L 0 20 L 160 30 L 0 40 L 160 50 L 0 60" />
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="subject" data-title="Subject">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>As a client,</h1>
            <h1>when I come <strong>back online</strong>,</h1>
            <h1>how to <strong>synchronize</strong> with the server?</h1>
          </div>
        </div>
      </div>
    </div>
    <div class="ft-section" data-id="common">
      <div class="ft-page" data-id="common" data-title="Common">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Common</h1>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="npush" data-title="No push!">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>No(t only) push!</h1>
            <svg viewBox="0 0 400 200" class="notonlypush">
              <style type="text/css" ><![CDATA[
                .notonlypush .device {
                  stroke: purple;
                  fill: black;
                }
                .notonlypush .cloud {
                  stroke: #222244;
                  fill: #999;
                }
                .notonlypush .link {
                  stroke: black;
                  stroke-dasharray: 4 2 2 2;
                }
                .notonlypush text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 10pt;
                }
              ]]></style>
              <path class="link" d="M 250 60 L 150 150" />
              <use xlink:href="#desktop" class="device" transform="translate(150, 150) scale(0.5)"/>

              <path class="link" d="M 250 60 L 250 150" />
              <use xlink:href="#phone" class="device" transform="translate(250, 150) scale(0.8)"/>

              <path class="link" d="M 250 60 L 350 150" />
              <use xlink:href="#tablet" class="device" transform="translate(350, 150) scale(0.7)"/>

              <path class="link" d="M 50 60 L 250 60" />
              <g transform="translate(50, 60)">
                <use class="cloud" xlink:href="#cloud" transform="scale(0.8)"/>
                <text>Server</text>
              </g>
              <g transform="translate(250, 60)">
                <use class="cloud" xlink:href="#cloud" transform="scale(1.7)"/>
                <text>Cloud Notification Service</text>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="operations" data-title="Operations">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Supported operations</h1>
            <h2>Performed by myself and others</h2>
            <ul>
              <li>Creating an item</li>
              <li>Modifying an existing item</li>
              <li>Deleting an item</li>
            </ul>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="selectivedatamodel" data-title="Selective data model">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Selective data model</h1>
            <svg viewBox="0 0 400 200" class="selectivedatamodel">
              <style type="text/css" ><![CDATA[
                .selectivedatamodel .cloud {
                  stroke: black;
                }
                .selectivedatamodel .one .cloud {
                  fill: rgba(140, 20, 20, 0.3);
                }
                .selectivedatamodel .two .cloud {
                  fill: rgba(20, 140, 20, 0.3);
                }
                .selectivedatamodel .three .cloud {
                  fill: rgba(20, 20, 140, 0.3);
                }
                .selectivedatamodel #sdmuser rect {
                  stroke: purple;
                  fill: rgb(140, 140, 140);
                }
                .selectivedatamodel #sdmuser text {
                  font-size: 10pt;
                }
                #sdmentity rect {
                  stroke: none;
                  fill: rgba(0, 0, 0, 0.2);
                }
                #sdmentity text {
                  fill: black;
                  font-size: 6pt;
                }
                .selectivedatamodel text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  fill: #222244;
                }
              ]]></style>
              <defs>
                <g id="sdmentity">
                  <rect x="-14" y="-7" width="28" height="14" />
                  <text>{ ... }</text>
                </g>
                <g id="sdmuser">
                  <rect x="-20" y="-10" width="40" height="20" />
                  <text>User</text>
                </g>
              </defs>

              <g class="one" transform="translate(140, 70)">
                <use class="cloud" xlink:href="#cloud" transform="scale(2)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(-30, -30)" />
                <use xlink:href="#sdmentity" transform="translate(-65, 10)" />
              </g>
              <g class="two" transform="translate(280, 70)">
                <use class="cloud" xlink:href="#cloud" transform="scale(2)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(-70, 0)" />
                <use xlink:href="#sdmentity" transform="translate(5, 30)" />
                <use xlink:href="#sdmentity" transform="translate(15, -30)" />
                <use xlink:href="#sdmentity" transform="translate(65, 10)" />
              </g>
              <g class="three" transform="translate(140, 145)">
                <use class="cloud" xlink:href="#cloud" transform="scale(1.7)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(20, -33)" />
                <use xlink:href="#sdmentity" transform="translate(55, 5)" />
                <use xlink:href="#sdmentity" transform="translate(-35, 25)" />
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="conflict" data-title="Conflicts">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Conflicts</h1>
            <svg viewBox="0 0 400 200" class="conflicts">
              <style type="text/css" ><![CDATA[
                .conflicts text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 7pt;
                }
                .conflicts path {
                  fill: none;
                  stroke: black;
                }
                .conflicts .timeline rect {
                  stroke: #222244;
                  fill: #BBB;
                }
                .conflicts .offline rect {
                  stroke: black;
                  stroke-dasharray: 4 4;
                  fill: #288;
                }
                .conflicts .action rect {
                  stroke: #442244;
                  fill: #DDD;
                }
                .conflicts .client rect {
                  stroke: #442222;
                }
              ]]></style>
              <g class="timeline client" transform="translate(75,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text>client A</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="timeline" transform="translate(200,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text>server</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="timeline client" transform="translate(325,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text>client B</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="action" transform="translate(140, 30)">
                <rect x="-40" y="-7" width="80" height="14"/>
                <text>sync</text>
                <path d="M -65 7 L 60 7" />
              </g>
              <g class="offline" transform="translate(75, 55)">
                <rect x="-40" y="-7" width="80" height="100"/>
                <text>offline</text>
              </g>
              <g class="action" transform="translate(75, 95)">
                <rect x="-30" y="-7" width="60" height="14"/>
                <text>change</text>
              </g>
              <g class="action" transform="translate(265, 100)">
                <rect x="-40" y="-7" width="80" height="14"/>
                <text>change</text>
                <path d="M -65 7 L -60 10 L -60 4 L -65 7 L 60 7" />
              </g>
              <g class="action" transform="translate(140, 160)">
                <rect x="-40" y="-7" width="80" height="14"/>
                <text>sync/conflict</text>
                <path d="M -65 7 L 60 7" />
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="clientinitiated" data-title="Client initiated">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Initiated by the client</h1>
            <ol>
              <li>client logs offline edits</li>
              <li>client pushes edits</li>
              <li>clients pulls changes which happened on the server</li>
            </ol>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="evaluation" data-title="Evaluation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Evaluation</h1>
            <ul>
              <li>Bandwidth</li>
              <li>Roundtrips</li>
              <li>Computational cost</li>
              <li>Recovery</li>
              <li>Setup</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="ft-section" data-id="wholesale">
      <div class="ft-page" data-id="transfereverything" data-title="Transfer everything">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Wholesale</h1>
            <h2>Transfer everything!</h2>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="evaluation" data-title="Evaluation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Evaluation</h1>
            <ul>
              <li>Bandwidth: <strong>O(dataset size)</strong></li>
              <li>Roundtrips: <em>1</em></li>
              <li>Computational cost: <em>low</em></li>
              <li>Recovery: <em>yes</em></li>
              <li>Setup: does anyone have a simpler idea?</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="versionedentities" data-title="Versioned entitied">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>With versioned entities</h1>
            <pre><code class="language-javascript">{
  type: "user",
  id : 42,
  version : 5,
  firstName : "John",
  lastName : "Smith"
  /* more */
}</code></pre>
            <pre><code class="language-javascript">[
  { id: 42, version: 5 }
  /* more */
]</code></pre>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="rsync" data-title="Rsync">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Rsync</h1>
            <svg class="rsync" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .rsync text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                }
                .rsync path {
                  stroke: black;
                  fill: none;
                }
                .rsync .timeline rect {
                  stroke: #222244;
                  fill: #BBB;
                }
                .rsync .action rect {
                  stroke: #442244;
                  fill: #DDD;
                }
              ]]></style>
              <defs>
                <path id="rsyncarrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
              </defs>
              <g class="timeline" transform="translate(100,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">requester</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="timeline" transform="translate(300,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">requested</text>
                <path d="M 0 10 L 0 180" />
              </g>


              <g class="action" transform="translate(200, 30)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">gimme your state!</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(100 7)"/>
              </g>
              <g class="action" transform="translate(300, 50)">
                <g transform="translate(55, 0)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">MD5(file)</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 60)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text font-size="10">{ file1: 1A2B, file2: 3C4D, ... }</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(-100 7) rotate(180)"/>
              </g>

              <g class="action" transform="translate(100, 110)">
                <g transform="translate(55, -10)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">MD5(file)</text>
                </g>
                <g transform="translate(90, 10)">
                  <rect x="-75" y="-7" width="150" height="14"/>
                  <text font-size="10">{ file1: 1A2B, file2: 5EF6, ... }</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 170)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text font-size="10">file2 = {...}</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(100 7)"/>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="versionedentitiedalgo" data-title="Algorithm">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Algorithm</h1>
            <svg class="versionedentitiedalgo" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .versionedentitiedalgo text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                }
                .versionedentitiedalgo path {
                  stroke: black;
                  fill: none;
                }
                .versionedentitiedalgo .timeline rect {
                  stroke: #222244;
                  fill: #BBB;
                }
                .versionedentitiedalgo .action rect {
                  stroke: #442244;
                  fill: #DDD;
                }
              ]]></style>
              <defs>
                <path id="versionedentitiedalgoarrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
              </defs>
              <g class="timeline" transform="translate(100,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">client</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="timeline" transform="translate(300,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">server</text>
                <path d="M 0 10 L 0 180" />
              </g>


              <g class="action" transform="translate(200, 30)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">gimme your state!</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(100 7)"/>
              </g>
              <g class="action" transform="translate(300, 50)">
                <g transform="translate(55, 0)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">entity.version</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 60)">
                <rect x="-85" y="-7" width="170" height="14"/>
                <text font-size="10">{ entity1: 2, entity2: 3 , ... }</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(-100 7) rotate(180)"/>
              </g>

              <g class="action" transform="translate(100, 110)">
                <g transform="translate(55, -10)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">entity.version</text>
                </g>
                <g transform="translate(100, 10)">
                  <rect x="-85" y="-7" width="170" height="14"/>
                  <text font-size="10">{ entity1: 2, entity2: 5 , ... }</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 160)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text font-size="10">gimme entity2</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(100 7)"/>
              </g>
              <g class="action" transform="translate(200, 180)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text font-size="10">entity2  = {...}</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(-100 7) rotate(180)"/>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="versionedevaluation" data-title="Versioned entity evaluation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Versioned entities evaluation</h1>
            <ul>
              <li>Bandwidth: lower but still <strong>O(dataset size)</strong></li>
              <li>Roundtrips: O(changeset size)</li>
              <li>Computational cost: <em>low</em></li>
              <li>Recovery: <strong>not to rogue edits</strong></li>
              <li>Setup: remains ok</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="ft-section" data-id="timestamps">
      <div class="ft-page" data-id="logchanges" data-title="Log changes">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Timestamps</h1>
            <h2>Log changes!</h2>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="algorithm" data-title="Log changes">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>How to</h1>
            <svg class="timestamp" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .timestamp text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 7pt;
                }
                .timestamp #cloud {
                  fill: #882222;
                  stroke: #999;
                }
                .timestamp .log {
                  fill: #228888;
                }
                .timestamp .client rect {
                  fill: #228822;
                }
                .timestamp .client path {
                  stroke: black;
                }
                .timestamp .checkpoint rect {
                  fill: #222288;
                }
                .timestamp .exchange path {
                  stroke: black;
                  fill: none;
                }
              ]]></style>
              <g transform="translate(130,100)">
                <use xlink:href="#cloud" transform="scale(2,3.8)" />
                <g transform="translate(55, -45)">
                  <rect class="log" x="-35" y="-8" width="70" height="106" />
                  <text>time - identity</text>
                  <text y="20">100 - /user/1</text>
                  <text y="30">101 - /user/2</text>
                  <text y="40">103 - /user/8</text>
                  <text y="50">104 - /user/3</text>
                  <text y="60">105 - /user/2</text>
                  <text y="70">106 - /user/5</text>
                  <text y="80">...</text>
                  <text y="90">242 - /user/5</text>
                </g>
                <g transform="translate(-40,0)">
                  <text x="10" y="20">/user/1: { ... }</text>
                  <text x="-10" y="-30">/user/2: { ... }</text>
                  <text x="-5" y="45">/user/3: { ... }</text>
                  <text x="5" y="-55">/user/3: { ... }</text>
                  <text x="-40" y="0">/user/4: { ... }</text>
                  <text x="25" y="-10">/user/5: { ... }</text>
                </g>
              </g>
              <g transform="translate(360, 10)">
                <g class="client">
                  <rect x="-20" y="-7" width="40" height="14" />
                  <text>Client</text>
                  <path d="M 0 7 L 0 160" />
                </g>
                <g class="checkpoint" transform="translate(-10, 30)">
                  <rect x="-40" y="-7" width="80" height="14" />
                  <text>Checkpoint: 104</text>
                </g>
                <g transform="translate(0,50)" class="exchange">
                  <path d="M 0 0 L -100 0" />
                  <use xlink:href="#arrow" transform="translate(-100 0) rotate(180)" />
                  <text x="-50" y="8">Changes since 104!</text>

                  <path d="M 0 35 L -100 35" />
                  <use xlink:href="#arrow" transform="translate(0 35)" />
                  <text x="-50" y="45">/user/2: { ... }</text>
                  <text x="-50" y="55">/user/5: { ... }</text>
                  <text x="-50" y="65">checkpoint: 242</text>
                </g>
                <g class="checkpoint" transform="translate(-10, 140)">
                  <rect x="-40" y="-7" width="80" height="14" />
                  <text>Checkpoint: 242</text>
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="versionidentifier" data-title="Version identifier">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Version identifier</h1>
            <ul>
              <li>Changes whenever anything in dataset changes</li>
              <li>Retrieve operations between two versions</li>
            </ul>
            <svg class="timestamp" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .timestamp text {
                      text-anchor: middle;
                      dominant-baseline: middle;
                      font-size: 7pt;
                }
                .timestamp .timelinename {
                  font-size: 7pt;
                  }
                  .timestamp path {
                      stroke: black;
                      fill: none;
                  }
                  .timestamp .commit rect {
                      stroke: #222244;
                      fill: green;
                  }
              .timestamp .tree rect {
                  stroke: #442244;
                  fill: #EF4767;
              }
              .timestamp .file rect {
                  stroke: #442244;
                  fill: #288;
              }
                  ]]></style>
                <defs>
                    <path id="viarrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
                </defs>
                  <g class="timeline commit" transform="translate(50,150)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">first commit f34cx4e</text>
                  </g>
                <path d="M 50 100 L 50 140" />
                <use xlink:href="#viarrow" transform="translate(144 150)"/>
                <use xlink:href="#viarrow" transform="translate(50 140) rotate (90)"/>

                <g class="timeline commit" transform="translate(50,100)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">second commit e324xz</text>
                  </g>
                <path d="M 50 50 L 50 90" />
                <use xlink:href="#viarrow" transform="translate(50 90) rotate (90)"/>
                <use xlink:href="#viarrow" transform="translate(144 100)"/>
                  <g class="timeline commit" transform="translate(50,50)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">third commit w34sxd</text>
                  </g>
                <use xlink:href="#viarrow" transform="translate(144 50)"/>
                  <g class="timeline tree" transform="translate(180, 150)">
                      <rect x="-35" y="-10" width="70" height="18"/>
                      <text class="timelinename">tree 12qaws</text>
                  </g>
                <use xlink:href="#viarrow" transform="translate(244 150)"/>
                <path d="M 105 150 L 145 150" />
                  <g class="timeline tree" transform="translate(180, 100)">
                      <rect x="-35" y="-10" width="70" height="18"/>
                      <text class="timelinename">tree hf75es</text>
                  </g>
                <path d="M 105 100 L 145 100" />
                <use xlink:href="#viarrow" transform="translate(244 85) rotate (-35)"/>
                <use xlink:href="#viarrow" transform="translate(244 115) rotate (35)"/>
                  <g class="timeline tree" transform="translate(180, 50)">
                      <rect x="-35" y="-10" width="70" height="18"/>
                      <text class="timelinename">tree qa23fc</text>
                  </g>
                <path d="M 105 50 L 145 50" />
                <use xlink:href="#viarrow" transform="translate(244 50)"/>
                <use xlink:href="#viarrow" transform="translate(244 85) rotate (50)"/>
                  <g class="timeline file" transform="translate(300, 150)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">main.js Version 1 w34rd2</text>
                  </g>
                <path d="M 215 150 L 245 150" />
                  <g class="timeline file" transform="translate(300,115)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">new.js qa24zx2 </text>
                  </g>
                <path d="M 215 100 L 245 115" />
                <path d="M 215 100 L 245 85" />
                  <g class="timeline file" transform="translate(300,85)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">main.js Version2 wa234f</text>
                  </g>
                <path d="M 215 50 L 245 50" />
                <path d="M 215 50 L 245 85" />
                  <g class="timeline file" transform="translate(300,50)">
                      <rect x="-55" y="-10" width="110" height="18"/>
                      <text class="timelinename">new.js Version2 334eds</text>
                  </g>
              </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="clocks" data-title="Clocks">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Clocks</h1>
            <svg viewBox="0 0 64 64" class="clocks">
              <defs>
                <g id="clock-icon">
                  <g transform="translate(15.85, 17.25) rotate(180)">
                    <rect class="hour-hand" x="-0.6" width="1.227" height="7.626"/>
                    <rect class="minute-hand" x="-0.6" width="1.227" height="11.439"/>
                  </g>

                  <!-- <circle cx="15.85" cy="17.25" r="14"/> -->
                  <path d="M15.879,2.531c-8.14,0-14.739,6.599-14.739,14.739c0,8.14,6.599,14.739,14.739,14.739s14.739-6.6,14.739-14.739 C30.618,9.13,24.02,2.531,15.879,2.531z M15.879,30.852c-7.511,0-13.6-6.089-13.6-13.6c0-7.511,6.089-13.601,13.6-13.601  c7.511,0,13.6,6.089,13.6,13.601C29.479,24.763,23.391,30.852,15.879,30.852z"/>

                  <rect x="24.794" y="28.95" transform="matrix(0.7071 0.7071 -0.7071 0.7071 28.9921 -10.8671)"  width="5.639" height="1.226"/>
                  <rect x="1.076" y="28.866" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 27.6973 47.4864)" width="5.876" height="1.227"/>
                  <path  d="M9.946,1.291c-1.044-0.812-2.353-1.3-3.778-1.3C2.761-0.009,0,2.752,0,6.158c0,1.425,0.488,2.733,1.3,3.778
  	l0.524-0.524l0.002,0.002l7.859-7.859L9.684,1.553L9.946,1.291z M6.167,1.198c0.634,0,1.233,0.132,1.79,0.35L1.558,7.948
  	c-0.218-0.557-0.35-1.156-0.35-1.79C1.208,3.418,3.428,1.198,6.167,1.198z"/>
                  <path  d="M30.7,9.936C31.512,8.892,32,7.583,32,6.158c0-3.406-2.762-6.167-6.168-6.167
  	c-1.425,0-2.733,0.488-3.777,1.3l0.524,0.524l-0.002,0.002l7.858,7.859l0.002-0.002L30.7,9.936z M30.793,6.158
  	c0,0.634-0.133,1.233-0.352,1.79l-6.398-6.399c0.557-0.218,1.156-0.35,1.789-0.35C28.572,1.198,30.793,3.418,30.793,6.158z"/>
                </g>
              </defs>
              <style type="text/css" ><![CDATA[
                .clocks {
                  fill: purple;
                  stroke: none;
                }
                .clocks .second-hand {
                  fill: #EF4767;
                }
                .clocks .second {
                  fill: #288;
                  stroke: none;
                }
              ]]></style>
              <g transform="translate(-10, 10)" class="first">
                <use xlink:href="#clock-icon" />
                <g transform="translate(15.85, 17.25) rotate(180)">
                  <rect class="second-hand" x="-0.12" width="0.24" height="9.83"/>
                </g>
              </g>
              <g transform="translate(42, 10)" class="second">
                <use xlink:href="#clock-icon" />
                <g transform="translate(15.85, 17.25) rotate(180)">
                  <rect class="second-hand" transform="rotate(10)" x="-0.12" width="0.24" height="9.83"/>
                </g>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="filters" data-title="Filters">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Filters</h1>
            <pre><code class="language-javascript">
  function(doc, req) {
    return (doc.type &amp;&amp; doc.type == "foo")
  }
            </code></pre>
            </br>
            <ul>
              <li>???Not Full Selective Model???</li>
              <li>Iterate on the whole log</li>
              <li>Soft deletes</li>
              <li>Data used in filters must be immutable</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="evaluation" data-title="Evaluation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Evaluation</h1>
            <ul>
              <li>Bandwidth: <em>efficient</em> (with deduplicates)</li>
              <li>Roundtrips: <em>just 1</em></li>
              <li>Computational cost: low for CPU / <strong>up to double database footprint</strong></li>
              <li>Recovery: <strong>errors remain here forever</strong></li>
              <li>Setup: <strong>logging infrastructure</strong>, extra field to store on clients</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="couchdb" data-title="Couch/Pouchdb">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Couch/PouchDB</h1>
              <ul>
                <li>ID</li>
                <li>Sequence</li>
                <li>Revision</li>
                <li>Document</li>
                <li>Database</li>
                <li>Source</li>
                <li>Target</li>
                <li>Checkpoint</li>
              </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="couchdbalgo" data-title="Couch/Pouchdb AlgoRythm">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Couch/PouchDB Algorithm</h1>
            <svg class="couchalgo" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .couchalgo text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  font-size: 7pt;
                }
                .couchalgo .timelinename {
                  font-size: 10pt;
                }
                .couchalgo path {
                  stroke: black;
                  fill: none;
                }
                .couchalgo .timeline rect {
                  stroke: #222244;
                  fill: #999;
                }
                .couchalgo .action rect {
                  stroke: #442244;
                  fill: #DDD;
                }
              ]]></style>
              <defs>
                <path id="versionedentitiedalgoarrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
              </defs>
              <g class="timeline" transform="translate(100,10)">
                <rect x="-60" y="-10" width="120" height="18"/>
                <text class="timelinename">web DB</text>
                <path d="M 0 10 L 0 180" />

                <g class="action" transform="translate(0,20)">
                  <rect x="-50" y="-7" width="100" height="14"/>
                  <text>source checkpoint: 1A2B</text>
                </g>
                <g class="action" transform="translate(0,152)">
                  <rect x="-50" y="-7" width="100" height="14"/>
                  <text>new checkpoint: 3C4D</text>
                </g>
              </g>
              <g class="timeline" transform="translate(300,10)">
                <rect x="-60" y="-10" width="120" height="18"/>
                <text class="timelinename">source DB</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="action" transform="translate(200, 50)">
                <rect x="-60" y="-7" width="120" height="14"/>
                <text>gimme changes since 1A2B</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(100 7)"/>
              </g>
              <g class="action" transform="translate(300, 70)">
                <g transform="translate(55, 0)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text>collect id/revision</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 80)">
                <rect x="-85" y="-7" width="170" height="14"/>
                <text>{ id1: revision3, id2: revision4 , ... }</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(-100 7) rotate(180)"/>
              </g>

              <g class="action" transform="translate(200, 120)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text>gimme id2 at revision4</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(100 7)"/>
              </g>
              <g class="action" transform="translate(200, 140)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text>{ _id: id2, _rev: revision4, ...}</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(-100 7) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 180)">
                <rect x="-75" y="-7" width="150" height="14"/>
                <text>send checkpoint: 3C4D</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#versionedentitiedalgoarrow" transform="translate(100 7)"/>
              </g>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <div class="ft-section" data-id="mathematical">
      <div class="ft-page" data-id="description" data-title="Mathematical">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Mathematical approach</h1>
            <h2>let's play!</h2>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="primitive" data-title="Primitive">
        <div class="stack-center">
          <div class="stacked-center">
            <h3>given n</h3>
            <h2>server: build a data structure of size O(n)</h1>
            <h2>client: compute its delta from the server<h1>
            <h2>if # of differences is less than 2<sup>n</sup></h1>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="algorithm" data-title="Algorithm">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Algorithm</h1>
            <pre><code class="language-javascript">var server, i, diff;

i = 0;

while (!diff) {

  server = getFromServer(i);

  diff = localStore.computeDifference(server);

  i++;
}

local.applyDifference(diff);</code></pre>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="performances" data-title="Performances">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Performances</h1>
            <ul>
              <li>Bandwidth: <em>O(changeset size)</em></li>
              <li>Roundtrips: <em>O(log(changeset size))</em></li>
              <li>Computational cost: ?</li>
              <li>Error correction: ?</li>
              <li>Setup: ?</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mathsync" data-title="Mathematical Synchronization">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Mathsync</h1>
            <img src="img/mathsync.png" />
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mathsyncdatastructure" data-title="Mathematical Synchronization - data structure">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Mathsync: data structure</h1>
            <pre><code class="language-javascript">// bucket: { hash: [], content: [], items: 0 }
var ibf = emptyBuckets(n);

items.forEach(function(item) {
  var bytes = serialize(item);

  buckets(bytes).forEach(function (id) {
    var bucket = ibf[id % n];

    bucket.hash = xor(bucket.hash, hash(bytes));
    bucket.content = xor(bucket.content, bytes);
    bucket.items++;
  });
});</code></pre>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mathsyncsetupserver" data-title="Mathematical Synchronization - setup server">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Mathsync setup - server</h1>
            <pre><code class="language-javascript">var data = [/* ... */];

function serialize(item) {
  var buffer = new Buffer(item.key + ':' + item.value, 'utf-8');
  return new Uint8Array(buffer).buffer;
}

var summarizer = require('mathsync').summarizer.fromItems(data, serialize);

app.use(route.get('/summary/:level', function* (level) {
  this.body = yield summarizer(level | 0);
}));</code></pre>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mathsyncsetupclient" data-title="Mathematical Synchronization - setup client">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Mathsync setup - client</h1>
            <pre><code class="language-javascript">var data = [/* ... */];

function serialize(item) { /* ... */ }

function deserialize(buffer) {
  var arr = new Buffer(new Uint8Array(buffer)).toString('utf-8').split(':');
  return { key: arr[0], value: arr[1] };
}

function fetchSummary(level) {
  return http.getJson('/summary/' + level);
}

var ms = require('mathsync');
var local = ms.summarizer.fromItems(data, serialize);
var remote = summarizer.fromJSON(fetchSummary);
var resolve = ms.resolver.fromSummarizers(local, remote, deserialize);

resolve().then(function (difference) { /* ... */ });</code></pre>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="aheadoftime" data-title="Ahead of time computation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Ahead of time computation</h1>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="matherror" data-title="Errors">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Errors get corrected!</h1>
            <svg class="matherrors" viewBox="0 0 400 200">
              <style type="text/css" ><![CDATA[
                .matherrors path {
                  stroke: black;
                }
                .matherrors text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                }
                .matherrors path {
                  fill: none;
                }
                .matherrors .timeline rect {
                  stroke: #222244;
                  fill: #BBB;
                }
                .matherrors .action rect {
                  stroke: #442244;
                  fill: #DDD;
                }
              ]]></style>
              <defs>
                <path id="rsyncarrow" d="M 0 0 L -5 3 L -5 -3 L 0 0 L -5 0" />
              </defs>
              <g class="timeline" transform="translate(100,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">application</text>
                <path d="M 0 10 L 0 180" />
              </g>
              <g class="timeline" transform="translate(300,10)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">server</text>
                <path d="M 0 10 L 0 180" />
              </g>

              <g class="action" transform="translate(200, 40)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">inconsistent data</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(100 7)"/>
                <use xlink:href="#rsyncarrow" transform="translate(-100 7) rotate(180)"/>
              </g>
              <g class="action" transform="translate(200, 160)">
                <rect x="-50" y="-7" width="100" height="14"/>
                <text font-size="10">synchronize</text>
                <path d="M -100 7 L 100 7" />
                <use xlink:href="#rsyncarrow" transform="translate(100 7)"/>
                <use xlink:href="#rsyncarrow" transform="translate(-100 7) rotate(180)"/>
              </g>
              <g class="action" transform="translate(300, 80)">
                <g transform="translate(55, 0)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">fix bug</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
              <g class="action" transform="translate(300, 120)">
                <g transform="translate(55, 0)">
                  <rect x="-40" y="-7" width="80" height="14"/>
                  <text font-size="10">clean caches</text>
                </g>
                <path d="M 0 -10 L 10 -10 L 10 10 L 0 10" />
                <use xlink:href="#rsyncarrow" transform="translate(0 10) rotate(180)"/>
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="mathselective" data-title="Selective data model">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Selective data model</h1><svg viewBox="0 0 400 200" class="mathselective">
              <style type="text/css" ><![CDATA[
                .mathselective .cloud {
                  stroke: black;
                }
                .mathselective .one .cloud {
                  fill: rgba(140, 20, 20, 0.3);
                }
                .mathselective .two .cloud {
                  fill: rgba(20, 140, 20, 0.3);
                }
                .mathselective .three .cloud {
                  fill: rgba(20, 20, 140, 0.3);
                }
                .mathselective #sdmuser rect {
                  stroke: purple;
                  fill: rgb(140, 140, 140);
                }
                .mathselective #sdmuser text {
                  font-size: 10pt;
                }
                #sdmentity rect {
                  stroke: none;
                  fill: rgba(0, 0, 0, 0.2);
                }
                #sdmentity text {
                  fill: black;
                  font-size: 6pt;
                }
                .mathselective text {
                  text-anchor: middle;
                  dominant-baseline: middle;
                  fill: #222244;
                }
              ]]></style>
              <defs>
                <g id="sdmentity">
                  <rect x="-14" y="-7" width="28" height="14" />
                  <text>{ ... }</text>
                </g>
                <g id="sdmuser">
                  <rect x="-20" y="-10" width="40" height="20" />
                  <text>User</text>
                </g>
              </defs>

              <g class="one" transform="translate(140, 70)">
                <use class="cloud" xlink:href="#cloud" transform="scale(2)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(-30, -30)" />
                <use xlink:href="#sdmentity" transform="translate(-65, 10)" />
              </g>
              <g class="two" transform="translate(280, 70)">
                <use class="cloud" xlink:href="#cloud" transform="scale(2)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(-70, 0)" />
                <use xlink:href="#sdmentity" transform="translate(5, 30)" />
                <use xlink:href="#sdmentity" transform="translate(15, -30)" />
                <use xlink:href="#sdmentity" transform="translate(65, 10)" />
              </g>
              <g class="three" transform="translate(140, 145)">
                <use class="cloud" xlink:href="#cloud" transform="scale(1.7)" />
                <use xlink:href="#sdmuser" />

                <use xlink:href="#sdmentity" transform="translate(20, -33)" />
                <use xlink:href="#sdmentity" transform="translate(55, 5)" />
                <use xlink:href="#sdmentity" transform="translate(-35, 25)" />
              </g>
            </svg>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="evaluation" data-title="Evaluation">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Evaluation</h1>
            <ul>
              <li>Bandwidth: <em>O(changeset size)</em></li>
              <li>Roundtrips: <em>O(log(changeset size))</em></li>
              <li>Computational cost: <strong>high</strong></li>
              <li>Error correction: <em>fix on next synchronization</em></li>
              <li>Setup: ?</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="ft-section" data-id="conclusion">
      <div class="ft-page" data-id="conclusion" data-title="Conclusion">
        <div class="stack-center">
          <div class="stacked-center">
            <h1>Conclusion bullets</h1>
            <ul>
              <li>Push is not sufficient</li>
              <li>Start simple with wholesale transfer!</li>
              <li>When needed move to log-based solution if its assumptions are validated</li>
              <li>Otherwise use the complex mathematical approach (and our library!)</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="ft-page" data-id="built-with" data-title="Slides built with">
        <div class="stack-center">
          <div class="stacked-center thanks">
            <h1>Thanks!</h1>
            <a href="http://flowtime-js.marcolago.com/"><img src="assets/img/logo-white-shadow.png"></a>
            <a href="http://nodejsconf.it/"><img src="nodejsconfit.png" /></a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="loglog"></div>

  <script src="js/brav1toolbox.js"></script>
  <script src="js/flowtime.js"></script>
  <script src="assets/js/prism.js"></script>

  <script type="text/javascript">
    var cacheTitle = document.title.replace("Flowtime.js | ", "");
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1228618-10']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackEvent', 'Flowtime', 'Landing', document.title]);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    // Configuration API test
    Flowtime.showProgress(true);
    // Flowtime.fragmentsOnSide(true);
    // Flowtime.fragmentsOnBack(true);
    // Flowtime.useHistory(false);
    // Flowtime.slideInPx(true);
    // Flowtime.sectionsSlideToTop(true);
    // Flowtime.gridNavigation(false);
    // Flowtime.useOverviewVariant(true);
    Flowtime.parallaxInPx(true);
    Flowtime.mouseDragEnabled(true);
    //
    // event management
    Flowtime.addEventListener("flowtimenavigation", onNavigation, false);
    function onNavigation(e)
    {
      _gaq.push(['_trackEvent', 'Flowtime', 'Navigation', cacheTitle + ' > ' + document.title.replace("Flowtime.js | ", "")]);
      // console.log(cacheTitle + ' > ' + document.title.replace("Flowtime.js | ", ""));
      cacheTitle = document.title.replace("Flowtime.js | ", "");
      //console.log('section', e.section, 'sectionIndex', e.sectionIndex);
      //console.log('page', e.page, 'pageIndex', e.);
      //console.log('pastSectionIndex', e.pastSectionIndex, 'pastPageIndex', e.pastPageIndex);
      //console.log('prevSection', e.prevSection);
      //console.log('nextSection', e.nextSection);
      //console.log('prevPage', e.prevPage);
      //console.log('nextPage', e.nextPage);
      //console.log('fragment', e.fragment, + 'fragmentIndex', e.fragmentIndex);
      //console.log("isOverview", e.isOverview);
      //console.log('progress:', e.progress, 'total:', e.total);
      // var value = Math.round(e.progress * 100 / e.total);
      // console.log('Completion: ' + value + '%');
    }
    // starts the application with configuration options
    Flowtime.start();
  </script>
</body>
</html>
